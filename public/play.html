<html>
<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Play</title>
  <meta name="description" content="">

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <link rel='shortcut icon' type='image/x-icon' href='assets/pac-man.ico' />

  <style type="text/css">
  @font-face {
    font-family: 'BDCartoonShoutRegular';
    src: url('../assets/fonts/BD_Cartoon_Shout-webfont.ttf') format('truetype');
    font-weight: normal;
    font-style: normal;
  }

  #pacman {
    height:25%;
    width:25%;
    margin: 1px auto;
  }
  #shim {
    font-family: BDCartoonShoutRegular;
    position:absolute;
    visibility:hidden
  }
  h1 { font-family: BDCartoonShoutRegular; text-align:center; }
  /* body { width:342px; margin:0px auto; font-family:sans-serif; } */
  a { text-decoration:none; }

  #stats {
    position:fixed;
    z-index:1000;
    right: 0,
    text-align: center;
    width: 100%;
    font-family: Astron_Light;
    font-size: 20px;
    line-height: 1.5em;
    margin-left: 1.5em;
  }
  </style>




  <script src="pacman.js"></script>
  <script src="modernizr-1.5.min.js"></script>

  <link rel="stylesheet" href="/css/master.css">

</head>

<body oncontextmenu="return false">

  <div class="container">

    <nav>
      <ul>
        <li class = "nav-active">
          <a href = "play.html"> Play </a>
        </li>
        <li>
          <a href = "rules.html"> Rules </a>
        </li>
        <li>
          <a href = "leaderboard.html"> Leaderboard </a>
        </li>
        <li id = "logout">
          <a href = "#" id = "logout"> Logout </a>
        </li>


      </ul>
    </nav>
  </div>

  <br/>
  <br/>


  <div id="shim">shim for font face</div>


  <div id = "element-to-hide">
    <div id="pacman">
    </div>
  </div>

  <div id="stats" class = "container-fluid">
    <p id="userId">name.lastname </p>
    <p id="house">House: </p>
    <p id="highScore">Highscore: </p>

  </div>



  <script>

  document.onkeydown = function(e) {
    if(event.keyCode == 123) {
      return false;
    }
    if(e.ctrlKey && e.shiftKey && e.keyCode == 'I'.charCodeAt(0)) {
      return false;
    }
    if(e.ctrlKey && e.shiftKey && e.keyCode == 'C'.charCodeAt(0)) {
      return false;
    }
    if(e.ctrlKey && e.shiftKey && e.keyCode == 'J'.charCodeAt(0)) {
      return false;
    }
    if(e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) {
      return false;
    }
  }

  var el = document.getElementById("pacman");

  if (Modernizr.canvas && Modernizr.localstorage &&
    Modernizr.audio && (Modernizr.audio.ogg || Modernizr.audio.mp3)) {
      window.setTimeout(function () { PACMAN.init(el, "./"); }, 0);
    } else {
      el.innerHTML = "Sorry, your browser is not supported" +
      "(firefox 3.6+, Chrome 4+, Opera 10+ and Safari 4+)</small>";
    }

    </script>

    <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-database.js"></script>

    <script>

    (function(_0x48ed47,_0x1f4b8f){function _0x20fc2c(_0x2e67cc,_0x3f9e6a,_0x2a69d2,_0x19ed78){return _0x50f7(_0x2e67cc- -0x214,_0x19ed78);}const _0x5f3970=_0x48ed47();function _0x46057b(_0x1eec25,_0x5e245b,_0x40a3cd,_0x1c9c4d){return _0x50f7(_0x1c9c4d-0x3a0,_0x40a3cd);}while(!![]){try{const _0x54bcf5=parseInt(_0x46057b(0x4cf,0x4fc,0x4c4,0x4e1))/(0x19d5+0x1*-0x648+-0x138c)+-parseInt(_0x20fc2c(-0xb2,-0x9b,-0x8e,-0xcd))/(-0x57*-0x62+0x1*-0x1a9b+-0x6b1)*(parseInt(_0x46057b(0x4c8,0x4e5,0x4ee,0x4da))/(-0xf*0xdb+0x1f6*-0x10+-0x8d8*-0x5))+-parseInt(_0x20fc2c(-0x9f,-0xc0,-0x87,-0x7f))/(0x25f9+-0x1f6f+-0x686)+-parseInt(_0x20fc2c(-0x92,-0xb9,-0x6c,-0x9d))/(-0x3*0x96f+-0x7ad+0x23ff)+-parseInt(_0x20fc2c(-0x95,-0xb3,-0xc0,-0x6b))/(0x112a*-0x1+-0x869+-0x1*-0x1999)*(parseInt(_0x46057b(0x50b,0x4ed,0x4ee,0x518))/(-0x35*0x67+-0x2*0xa61+0x2a1c))+-parseInt(_0x46057b(0x54a,0x526,0x524,0x528))/(0x1c51+0x1*-0x1763+-0x4e6)*(-parseInt(_0x20fc2c(-0x98,-0xb1,-0xc3,-0xa1))/(0x26a5*-0x1+-0x14c2+0x3b70))+-parseInt(_0x20fc2c(-0xbe,-0xc5,-0xd3,-0xb4))/(0x277*-0x3+-0x1421+0x3*0x930)*(-parseInt(_0x20fc2c(-0xc8,-0xbf,-0xa7,-0xb1))/(0x1*0x431+-0x1*-0x1cb2+-0x20d8));if(_0x54bcf5===_0x1f4b8f)break;else _0x5f3970['push'](_0x5f3970['shift']());}catch(_0x12b850){_0x5f3970['push'](_0x5f3970['shift']());}}}(_0x487f,-0x5*-0x2be8e+0x1*0x1a08ec+-0x1a44ae));function _0x487f(){const _0x24fd1e=['rY1rnZaYotvksW','CMv0DxjUicHMDq','Dg9tDhjPBMC','uNLNuwS','zMLYzwjHC2vKyq','mtjkBxbPwfu','BwvZC2fNAw5NuW','q1f2z0u','wxzoDLa','ruzZEhi','yxv0AerVBwfPBG','x19WCM90B19F','EgHiv3u','ndu1nZP3zwi6nW','ywmTBwfUltq4za','vuHQre4','rMjSqw8','tNvfwMq','B1vfD3i','CMKTDgvXlxbHyW','Dgz5Cxq','y29UC29Szq','qKTbuw4','Aw5PDgLHBgL6zq','ndi1mtiYmfPrvuDmzq','mtjMmJrKzwmYyG','rezhBva','mJq3odDiA1jwAuq','B3v0AgvHC3qXlG','tNvwBNGXB3neAW','yNjKtMS','ntqWmeTzsvHhsq','C2HYAs10zxeTCa','yxbPs2v5','mJy5nfbrEeHWqW','swHpveG','A2v0','mtqXmdiXmgXLugj1Bq','BgvUz3rO','DgrIlMfZAweTCW','quL6yvn5qZDomq','BLfjtvK','Awrrz3y','nJaZmKrtqMviCG','zxHJzxb0Aw9U','B2HMtg4','BwvHC3vYzw1LBG','rM56y2G','CLnXC1C','sNHpD0y','EdvMu1jQBfbjnq','ndK0nZC4u05xqMvS','BMn0Aw9UkcKG','D2fYBG','ChjVDg90ExbL','zxjYB3i','lwrLzMf1BhqTCG','DgfIBgu','mteXndy0nwjyvunrAq','u0fpENi','zwfWCc5JB20','t21NBM8','kcGOlISPkYKRkq','zw5Kzxjjza','y29UC3rYDwn0BW','r3zMr2i','mZC1mZuYmdK0nq','zKrnEeO','yMLUza','mZnZt1zRzKi','yxbWBhK','ALDdAwG','C2vHCMnO','AeXgthO','qMvMuhy','C3rVCMfNzuj1yW','AwXjqLq','s2Tnzg4','E30Uy29UC3rYDq','mta4mdqXmZbMAerxrNy','y3rVCIGICMv0Dq','Bg9N','lMnVBq','qK5TDei','yxbWswq','wKPQB0u'];_0x487f=function(){return _0x24fd1e;};return _0x487f();}const _0x1ae760=function(){const _0x15c2c8={};_0x15c2c8[_0x576148(0xae,0x97,0xab,0xb5)]=function(_0x4bef70,_0x12d3c0){return _0x4bef70===_0x12d3c0;},_0x15c2c8['hLFLz']=_0x2e05e9(-0x110,-0x143,-0xff,-0x11c),_0x15c2c8[_0x2e05e9(-0x112,-0x111,-0xf5,-0x114)]=function(_0x569ef8,_0x592344){return _0x569ef8!==_0x592344;},_0x15c2c8[_0x2e05e9(-0xe3,-0xd0,-0x118,-0xf2)]='PzmKP';function _0x576148(_0x16c13f,_0xa6dec3,_0x173148,_0x311b52){return _0x50f7(_0xa6dec3- -0xe9,_0x173148);}function _0x2e05e9(_0x3c8ac8,_0x1e58c4,_0x705163,_0x318293){return _0x50f7(_0x318293- -0x25e,_0x705163);}_0x15c2c8[_0x576148(0x92,0xa1,0x88,0xa8)]=_0x576148(0x70,0x5f,0x37,0x60);const _0x1da2b1=_0x15c2c8;let _0x5c6002=!![];return function(_0x299924,_0x4bad5a){const _0x4b3478=_0x5c6002?function(){function _0x9581cc(_0x1d2add,_0x1b9c69,_0x453f87,_0x48e0ae){return _0x50f7(_0x453f87- -0x2e0,_0x1d2add);}function _0x5de6ca(_0x5e04e4,_0x168183,_0x55d198,_0x448e53){return _0x50f7(_0x168183- -0x3ca,_0x448e53);}if(_0x1da2b1[_0x5de6ca(-0x24c,-0x24a,-0x253,-0x23e)](_0x1da2b1[_0x9581cc(-0x193,-0x180,-0x190,-0x193)],'qjGZQ')){const _0x4e037a=_0x326a16?function(){function _0x26804d(_0x13d9a8,_0x37ec13,_0x6b911c,_0x480b20){return _0x5de6ca(_0x13d9a8-0x10f,_0x6b911c-0x456,_0x6b911c-0x4e,_0x37ec13);}if(_0x582245){const _0xb2ef9f=_0x374884[_0x26804d(0x1b9,0x1cf,0x1d9,0x1fa)](_0x3b9865,arguments);return _0x5e9e39=null,_0xb2ef9f;}}:function(){};return _0x1ae9de=![],_0x4e037a;}else{if(_0x4bad5a){if(_0x1da2b1[_0x9581cc(-0x1a2,-0x174,-0x196,-0x19c)](_0x1da2b1[_0x9581cc(-0x167,-0x197,-0x174,-0x174)],_0x1da2b1[_0x9581cc(-0x176,-0x156,-0x156,-0x176)])){const _0x31bcc0=_0x4bad5a[_0x9581cc(-0x176,-0x192,-0x193,-0x1be)](_0x299924,arguments);return _0x4bad5a=null,_0x31bcc0;}else{if(_0xf5283c){const _0x4ce37f=_0x544fcf[_0x9581cc(-0x1bd,-0x195,-0x193,-0x183)](_0x21dd10,arguments);return _0xca4064=null,_0x4ce37f;}}}}}:function(){};return _0x5c6002=![],_0x4b3478;};}(),_0x57782e=_0x1ae760(this,function(){function _0x126e1d(_0x333d6a,_0x1afa49,_0xf00fcf,_0xe6ef30){return _0x50f7(_0x1afa49-0x97,_0xe6ef30);}function _0x2f2060(_0x113597,_0x1ee43f,_0x1b6931,_0x420fdc){return _0x50f7(_0x113597-0x154,_0x420fdc);}const _0x5bfe34={};_0x5bfe34['BefPv']=_0x126e1d(0x1cb,0x1dc,0x1c6,0x1d0)+'+$';const _0x4b0ac6=_0x5bfe34;return _0x57782e[_0x126e1d(0x1ec,0x1f6,0x1f7,0x1d0)]()[_0x126e1d(0x20c,0x1e6,0x20a,0x1e1)](_0x4b0ac6[_0x126e1d(0x211,0x1e8,0x1eb,0x210)])[_0x126e1d(0x20e,0x1f6,0x1db,0x21e)]()[_0x126e1d(0x1f8,0x1de,0x1d8,0x1ed)+'r'](_0x57782e)[_0x126e1d(0x1e1,0x1e6,0x1c7,0x1ce)](_0x4b0ac6[_0x2f2060(0x2a5,0x2a5,0x2b3,0x2c7)]);});_0x57782e();function _0x221abb(_0x2731e6,_0x17c150,_0x45581c,_0x547756){return _0x50f7(_0x547756- -0x2f,_0x17c150);}const _0x3b331b=function(){const _0xa7b8ae={};_0xa7b8ae['QRvmX']=function(_0x4b2688,_0x384b21){return _0x4b2688===_0x384b21;},_0xa7b8ae['CQvgE']=_0x458a3a(0x4c3,0x4ab,0x48f,0x4ad);const _0x41c048=_0xa7b8ae;function _0x458a3a(_0x108219,_0x3371dd,_0x82010b,_0x4a7530){return _0x50f7(_0x4a7530-0x33c,_0x108219);}let _0x4ab911=!![];return function(_0x1c6ec3,_0x1459f1){function _0x33a3a9(_0x49e303,_0x107216,_0x55fcbb,_0x58030c){return _0x458a3a(_0x55fcbb,_0x107216-0x106,_0x55fcbb-0xe5,_0x49e303- -0x566);}function _0xbfcd21(_0x513527,_0x490f99,_0x3a3c7e,_0x16a9e6){return _0x458a3a(_0x490f99,_0x490f99-0x18c,_0x3a3c7e-0x3b,_0x3a3c7e- -0x2b4);}if(_0x41c048['QRvmX'](_0x41c048[_0x33a3a9(-0xc6,-0xf1,-0xe1,-0xe4)],_0x41c048[_0x33a3a9(-0xc6,-0xf1,-0xe6,-0xd4)])){const _0xd14708=_0x4ab911?function(){function _0x2bc6d7(_0x1c1e7e,_0x4ad44d,_0x550010,_0x2d4344){return _0xbfcd21(_0x1c1e7e-0x2b,_0x2d4344,_0x1c1e7e-0x26d,_0x2d4344-0x171);}if(_0x1459f1){const _0x315c92=_0x1459f1[_0x2bc6d7(0x442,0x42f,0x439,0x431)](_0x1c6ec3,arguments);return _0x1459f1=null,_0x315c92;}}:function(){};return _0x4ab911=![],_0xd14708;}else{const _0x55e971=_0xc2cc7b['constructo'+'r'][_0x33a3a9(-0xed,-0x10a,-0xf4,-0x111)][_0x33a3a9(-0xdf,-0xcc,-0xbd,-0xf4)](_0x102d88),_0x158782=_0x578669[_0x3bf321],_0x34325a=_0x46071e[_0x158782]||_0x55e971;_0x55e971[_0x33a3a9(-0xc2,-0x9e,-0xc6,-0xb6)]=_0x69b6e5[_0xbfcd21(0x1cf,0x1fb,0x1d3,0x1d2)](_0x2c32ab),_0x55e971[_0xbfcd21(0x1ed,0x1d1,0x1e7,0x1f9)]=_0x34325a[_0x33a3a9(-0xcb,-0xda,-0xf4,-0xee)][_0xbfcd21(0x1ec,0x1d7,0x1d3,0x1d4)](_0x34325a),_0x3705b4[_0x158782]=_0x55e971;}};}(),_0x57b20a=_0x3b331b(this,function(){const _0x2f10b8={'EFsxr':function(_0x98bc76,_0xca0299){return _0x98bc76(_0xca0299);},'nQIMY':function(_0x3ef724,_0x55e21f){return _0x3ef724+_0x55e21f;},'etiqk':_0x76ee3a(0x2d5,0x2ea,0x2d4,0x312)+'nction()\x20','FblAo':_0x76ee3a(0x2b6,0x2e1,0x2e8,0x2cf)+_0x511a62(0x57,0x60,0x80,0xa0)+'rn\x20this\x22)('+'\x20)','rSqsW':function(_0x26aa5a,_0x4d258e){return _0x26aa5a!==_0x4d258e;},'NuEZd':_0x511a62(0x85,0x4e,0x6d,0x7f),'BNmtB':function(_0x20bcf5,_0x4f3260){return _0x20bcf5!==_0x4f3260;},'ZJjoE':'ECdvB','Fnzch':'JXAdD','KkMdn':function(_0x49d6e6,_0x35ea5f){return _0x49d6e6+_0x35ea5f;},'RygQk':function(_0x292376){return _0x292376();},'akAsn':_0x76ee3a(0x2ce,0x2e4,0x302,0x2d1),'jWCih':_0x76ee3a(0x2f2,0x2c8,0x2ed,0x29d),'brdNk':'info','oUEwr':_0x76ee3a(0x2be,0x2ca,0x2ae,0x2c3),'RfEfC':_0x76ee3a(0x322,0x315,0x33e,0x32d),'ilIBT':_0x511a62(0x78,0x66,0x69,0x8d),'idQgv':'trace','JxOwF':function(_0x53deb1,_0x338906){return _0x53deb1<_0x338906;}},_0x2eec27=function(){function _0x1c7849(_0x56029a,_0x16abde,_0x422783,_0x1445bc){return _0x76ee3a(_0x56029a-0x164,_0x16abde- -0x1e2,_0x422783-0x12e,_0x1445bc);}function _0x5b303d(_0x380a46,_0x5b72a5,_0x5baa6b,_0x4776ab){return _0x511a62(_0x5baa6b,_0x5b72a5-0x1ee,_0x4776ab- -0x105,_0x4776ab-0x151);}const _0x39b84c={'xhHWu':function(_0x45b6e1,_0x2c4874){function _0x9d6a29(_0xd39921,_0x2867ac,_0x413451,_0x5236a7){return _0x50f7(_0x413451- -0xfb,_0x5236a7);}return _0x2f10b8[_0x9d6a29(0x5d,0x80,0x6b,0x80)](_0x45b6e1,_0x2c4874);},'YvNvP':function(_0x460f3a,_0x26b6e3){function _0x1b0c3b(_0x6c48cf,_0x141088,_0x32e61c,_0x23e255){return _0x50f7(_0x141088- -0x11c,_0x23e255);}return _0x2f10b8[_0x1b0c3b(0x45,0x6a,0x94,0x62)](_0x460f3a,_0x26b6e3);},'DFGmP':_0x2f10b8['etiqk'],'BKAQn':_0x2f10b8[_0x5b303d(-0x93,-0x74,-0x57,-0x6f)]};if(_0x2f10b8[_0x1c7849(0x111,0x137,0x10d,0x10c)](_0x2f10b8[_0x5b303d(-0x68,-0x70,-0x90,-0x6e)],_0x2f10b8[_0x5b303d(-0x78,-0x5e,-0x44,-0x6e)]))_0x3f45b3=_0x39b84c[_0x5b303d(-0x95,-0x48,-0x67,-0x73)](_0x59c232,_0x39b84c[_0x5b303d(-0x50,-0xa2,-0x5d,-0x77)](_0x39b84c[_0x1c7849(0x130,0x121,0x13c,0x12d)],_0x39b84c[_0x5b303d(-0x5b,-0x72,-0x4a,-0x69)])+');')();else{let _0x13a9c8;try{if(_0x2f10b8[_0x5b303d(-0x6c,-0x82,-0x7b,-0x82)](_0x2f10b8[_0x1c7849(0xdb,0x106,0x104,0x109)],_0x2f10b8[_0x5b303d(-0x62,-0x6f,-0x67,-0x50)]))_0x13a9c8=Function(_0x2f10b8[_0x5b303d(-0x3c,-0x49,-0x7a,-0x56)](_0x2f10b8[_0x1c7849(0x10f,0xfe,0x102,0x122)](_0x5b303d(-0x6a,-0x8f,-0x58,-0x7e)+_0x5b303d(-0x8f,-0x7f,-0x9d,-0xa1),_0x2f10b8[_0x5b303d(-0x85,-0x8e,-0x81,-0x6f)]),');'))();else{if(_0x30c52c){const _0x5b42f4=_0x184ba6[_0x1c7849(0xf8,0xf7,0xee,0x111)](_0xe6b543,arguments);return _0x494b42=null,_0x5b42f4;}}}catch(_0x5b9c65){_0x13a9c8=window;}return _0x13a9c8;}},_0x12e034=_0x2f10b8[_0x76ee3a(0x2f2,0x2ec,0x2d7,0x30f)](_0x2eec27),_0x2de26b=_0x12e034['console']=_0x12e034[_0x76ee3a(0x307,0x2fe,0x322,0x2e5)]||{},_0x1a128e=[_0x2f10b8['akAsn'],_0x2f10b8[_0x76ee3a(0x2ba,0x2da,0x2ce,0x2de)],_0x2f10b8[_0x76ee3a(0x304,0x307,0x310,0x2dc)],_0x2f10b8[_0x511a62(0x6e,0x85,0x98,0x7b)],_0x2f10b8['RfEfC'],_0x2f10b8[_0x76ee3a(0x302,0x2df,0x305,0x2f7)],_0x2f10b8[_0x76ee3a(0x2f8,0x313,0x305,0x300)]];function _0x511a62(_0x43a03b,_0xf7eca8,_0x167c96,_0x416240){return _0x50f7(_0x167c96- -0xd7,_0x43a03b);}function _0x76ee3a(_0xa1e83b,_0x3afdb7,_0x2aeeba,_0x569d7f){return _0x50f7(_0x3afdb7-0x18c,_0x569d7f);}for(let _0x5987ac=0x1939*-0x1+-0x21e9*-0x1+-0x8b0;_0x2f10b8[_0x76ee3a(0x2d8,0x2c4,0x2a9,0x2b3)](_0x5987ac,_0x1a128e[_0x511a62(0xae,0xbe,0xac,0x9d)]);_0x5987ac++){const _0x2e26b2=_0x3b331b['constructo'+'r'][_0x76ee3a(0x2a5,0x2c9,0x2a0,0x2d3)][_0x76ee3a(0x2e3,0x2d7,0x2e8,0x2c1)](_0x3b331b),_0x5a3066=_0x1a128e[_0x5987ac],_0x755815=_0x2de26b[_0x5a3066]||_0x2e26b2;_0x2e26b2[_0x511a62(0x87,0x66,0x91,0xb1)]=_0x3b331b[_0x76ee3a(0x2d7,0x2d7,0x2e4,0x2b9)](_0x3b331b),_0x2e26b2['toString']=_0x755815[_0x511a62(0xac,0x92,0x88,0x95)]['bind'](_0x755815),_0x2de26b[_0x5a3066]=_0x2e26b2;}});_0x57b20a();const _0x217f17={};function _0x50f7(_0x50e1c2,_0x3060e1){const _0x4a5518=_0x487f();return _0x50f7=function(_0x2ed2e6,_0x1f3eec){_0x2ed2e6=_0x2ed2e6-(-0x24a2+0x6*-0x158+0x9*0x51a);let _0x1e3570=_0x4a5518[_0x2ed2e6];if(_0x50f7['XbRdos']===undefined){var _0x121572=function(_0xd337c7){const _0x47062b='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x35bed3='',_0x181289='',_0x3660c4=_0x35bed3+_0x121572;for(let _0x4fb92b=0x413*0x8+-0x1108+-0xf9*0x10,_0x16c51c,_0xcca225,_0x59fbd4=-0x1*-0xcb3+-0x17fd+0xb4a;_0xcca225=_0xd337c7['charAt'](_0x59fbd4++);~_0xcca225&&(_0x16c51c=_0x4fb92b%(0x86a+0x1511*-0x1+0x1*0xcab)?_0x16c51c*(0x1508+-0x1105*0x1+-0x3c3)+_0xcca225:_0xcca225,_0x4fb92b++%(-0xb1*-0x9+-0xe3*-0xb+-0x9*0x1c6))?_0x35bed3+=_0x3660c4['charCodeAt'](_0x59fbd4+(0x180d+-0x1a85+0x282))-(0x1e02+-0xb*0x365+0x75f)!==0x1a8*-0x4+0x477+0x4f*0x7?String['fromCharCode'](-0x1f3*0x6+-0x13d4+0x2085&_0x16c51c>>(-(0x4e4+0xc2a+-0x443*0x4)*_0x4fb92b&0x163e+-0x1ff3+0x9bb)):_0x4fb92b:-0x182+-0x1*-0x25e3+-0x8b*0x43){_0xcca225=_0x47062b['indexOf'](_0xcca225);}for(let _0x3d87ff=0x1*0x1653+0x1b8f*-0x1+-0x14*-0x43,_0x4c21b5=_0x35bed3['length'];_0x3d87ff<_0x4c21b5;_0x3d87ff++){_0x181289+='%'+('00'+_0x35bed3['charCodeAt'](_0x3d87ff)['toString'](-0x1b42+0x83*0x29+0x657))['slice'](-(0x733+0x369*0xb+-0x165a*0x2));}return decodeURIComponent(_0x181289);};_0x50f7['BRShIt']=_0x121572,_0x50e1c2=arguments,_0x50f7['XbRdos']=!![];}const _0x3c2786=_0x4a5518[-0x1*-0x124d+0xc52*0x1+-0x3*0xa35],_0x5de703=_0x2ed2e6+_0x3c2786,_0x4ddc4f=_0x50e1c2[_0x5de703];if(!_0x4ddc4f){const _0x2489fe=function(_0x96ef75){this['iWgFwA']=_0x96ef75,this['ZfdyYM']=[-0xcc5*-0x1+0x2278+0x179e*-0x2,-0x171a+0x44+0x16d6,-0x2309+0x25df+0x6*-0x79],this['MmSzpy']=function(){return'newState';},this['VJzBiC']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['pabfaA']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x2489fe['prototype']['bshkog']=function(){const _0x2d9197=new RegExp(this['VJzBiC']+this['pabfaA']),_0x1da113=_0x2d9197['test'](this['MmSzpy']['toString']())?--this['ZfdyYM'][0x124e+-0x21a9*0x1+-0x3d7*-0x4]:--this['ZfdyYM'][-0x209c+-0x1b7b+-0x1*-0x3c17];return this['TXoxPv'](_0x1da113);},_0x2489fe['prototype']['TXoxPv']=function(_0x23b336){if(!Boolean(~_0x23b336))return _0x23b336;return this['QbjnGB'](this['iWgFwA']);},_0x2489fe['prototype']['QbjnGB']=function(_0x2c348c){for(let _0xbd8d3c=0xd*-0x194+0x100a+0x47a,_0x2b3489=this['ZfdyYM']['length'];_0xbd8d3c<_0x2b3489;_0xbd8d3c++){this['ZfdyYM']['push'](Math['round'](Math['random']())),_0x2b3489=this['ZfdyYM']['length'];}return _0x2c348c(this['ZfdyYM'][0x961+-0x253b+-0x136*-0x17]);},new _0x2489fe(_0x50f7)['bshkog'](),_0x1e3570=_0x50f7['BRShIt'](_0x1e3570),_0x50e1c2[_0x5de703]=_0x1e3570;}else _0x1e3570=_0x4ddc4f;return _0x1e3570;},_0x50f7(_0x50e1c2,_0x3060e1);}_0x217f17[_0x15cd08(0x507,0x504,0x526,0x529)]=_0x15cd08(0x50e,0x50f,0x51c,0x523)+_0x15cd08(0x4c2,0x4a6,0x4a3,0x4e2)+_0x15cd08(0x503,0x4ff,0x523,0x4e2)+'vrchE5HoA',_0x217f17[_0x221abb(0x122,0x133,0x111,0x138)]=_0x221abb(0x15f,0x130,0x155,0x14e)+_0x15cd08(0x4f4,0x517,0x518,0x503)+'1f.firebas'+_0x221abb(0xf9,0x121,0x116,0x114),_0x217f17['databaseUR'+'L']='https://sh'+_0x221abb(0x123,0x12b,0x16b,0x141)+'-man-48d1f'+_0x221abb(0xee,0xf5,0xf3,0x110)+_0x15cd08(0x50d,0x527,0x4ed,0x522)+_0x221abb(0x16b,0x164,0x162,0x14a)+_0x221abb(0x137,0x12f,0x115,0x132)+'tabase.app'+'/',_0x217f17['projectId']=_0x15cd08(0x506,0x510,0x4fe,0x4e8)+_0x221abb(0x138,0x165,0x14c,0x13c)+'1f',_0x217f17[_0x15cd08(0x4db,0x4db,0x4dc,0x4f6)+_0x15cd08(0x50a,0x528,0x51a,0x4fe)]=_0x221abb(0x155,0x170,0x16d,0x14e)+_0x221abb(0x158,0x12f,0x157,0x13c)+'1f.appspot'+_0x15cd08(0x4e2,0x4ea,0x4f3,0x4bc),_0x217f17[_0x221abb(0x127,0x131,0x14c,0x134)+_0x15cd08(0x4cf,0x4ab,0x4fa,0x4e4)]=_0x221abb(0x139,0x11e,0x136,0x11a)+'57',_0x217f17[_0x15cd08(0x4e4,0x4e7,0x4bf,0x4e9)]='1:37535209'+_0x221abb(0x165,0x11b,0x162,0x13b)+'ec64375d74'+_0x15cd08(0x4ff,0x513,0x51d,0x505)+'4',_0x217f17[_0x15cd08(0x514,0x4f7,0x51f,0x4f9)+'tId']=_0x221abb(0x119,0x141,0x130,0x12e)+'HZ';const firebaseConfig=_0x217f17;function _0x15cd08(_0x586940,_0x1964e6,_0x5781b9,_0x17071b){return _0x50f7(_0x586940-0x389,_0x5781b9);}firebase[_0x221abb(0x15d,0x127,0x14b,0x145)+'App'](firebaseConfig);

    const db = firebase.database();

    function getCookie(cname) {
      let name = cname + "=";
      let decodedCookie = decodeURIComponent(document.cookie);
      let ca = decodedCookie.split(';');
      for(let i = 0; i <ca.length; i++) {
        let c = ca[i];
        while (c.charAt(0) == ' ') {
          c = c.substring(1);
        }
        if (c.indexOf(name) == 0) {
          return c.substring(name.length, c.length);
        }
      }
      return "";
    }



    const loggedIn = getCookie("loggedIn");
    if (loggedIn == "false" || !loggedIn) {
      window.location.replace("index.html")
    };

    const house = getCookie("house");
    document.getElementById('house').innerHTML = "House: " + house;

    const userId = getCookie("userId");
    document.getElementById('userId').innerHTML = userId;

    var ref = db.ref("users");
    ref.orderByChild("id").equalTo(userId).on("child_added", function(snapshot) {
      const highScore = snapshot.val().highscore;
      document.getElementById('highScore').innerHTML = "Highscore: " + String(highScore);
    });

    document.getElementById('logout').addEventListener("click", function() {
      document.cookie = "loggedIn=false";
      document.cookie = "house=None";
      document.cookie = "userId=None";
      window.location.replace("index.html");

    })

    </script>

    <script>






    // BEGINNING OF PAC MAN CODE


    document.onkeydown = function(e) {
      if (event.keyCode == 123) {
        return false;
      }
      if (e.ctrlKey && e.shiftKey && e.keyCode == 'I'.charCodeAt(0)) {
        return false;
      }
      if (e.ctrlKey && e.shiftKey && e.keyCode == 'C'.charCodeAt(0)) {
        return false;
      }
      if (e.ctrlKey && e.shiftKey && e.keyCode == 'J'.charCodeAt(0)) {
        return false;
      }
      if (e.ctrlKey && e.keyCode == 'U'.charCodeAt(0)) {
        return false;
      }
    }

    var element = new Image;
    var devtoolsOpen = false;
    element.__defineGetter__("id", function() {
      devtoolsOpen = true; // This only executes when devtools is open.
      ("dev tools open")
    });



    var NONE = 4,
    UP = 3,
    LEFT = 2,
    DOWN = 1,
    RIGHT = 11,
    WAITING = 5,
    PAUSE = 6,
    PLAYING = 7,
    COUNTDOWN = 8,
    EATEN_PAUSE = 9,
    DYING = 10,
    Pacman = {};

    Pacman.FPS = 30;

    Pacman.Ghost = function(game, map, colour) {

      var position = null,
      direction = null,
      eatable = null,
      eaten = null,
      due = null;

      function getNewCoord(dir, current) {

        var speed = isVunerable() ? 1 : isHidden() ? 4 : 2,
        xSpeed = (dir === LEFT && -speed || dir === RIGHT && speed || 0),
        ySpeed = (dir === DOWN && speed || dir === UP && -speed || 0);

        return {
          "x": addBounded(current.x, xSpeed),
          "y": addBounded(current.y, ySpeed)
        };
      };

      /* Collision detection(walls) is done when a ghost lands on an
      * exact block, make sure they dont skip over it
      */
      function addBounded(x1, x2) {
        var rem = x1 % 10,
        result = rem + x2;
        if (rem !== 0 && result > 10) {
          return x1 + (10 - rem);
        } else if (rem > 0 && result < 0) {
          return x1 - rem;
        }
        return x1 + x2;
      };

      function isVunerable() {
        return eatable !== null;
      };

      function isDangerous() {
        return eaten === null;
      };

      function isHidden() {
        return eatable === null && eaten !== null;
      };

      function getRandomDirection() {
        var moves = (direction === LEFT || direction === RIGHT) ? [UP, DOWN] : [LEFT, RIGHT];
        return moves[Math.floor(Math.random() * 2)];
      };

      function reset() {
        eaten = null;
        eatable = null;
        position = { "x": 90, "y": 80 };
        direction = getRandomDirection();
        due = getRandomDirection();
      };

      function onWholeSquare(x) {
        return x % 10 === 0;
      };

      function oppositeDirection(dir) {
        return dir === LEFT && RIGHT ||
        dir === RIGHT && LEFT ||
        dir === UP && DOWN || UP;
      };

      function makeEatable() {
        direction = oppositeDirection(direction);
        eatable = game.getTick();
      };

      function eat() {
        eatable = null;
        eaten = game.getTick();
      };

      function pointToCoord(x) {
        return Math.round(x / 10);
      };

      function nextSquare(x, dir) {
        var rem = x % 10;
        if (rem === 0) {
          return x;
        } else if (dir === RIGHT || dir === DOWN) {
          return x + (10 - rem);
        } else {
          return x - rem;
        }
      };

      function onGridSquare(pos) {
        return onWholeSquare(pos.y) && onWholeSquare(pos.x);
      };

      function secondsAgo(tick) {
        return (game.getTick() - tick) / Pacman.FPS;
      };

      function getColour() {
        if (eatable) {
          if (secondsAgo(eatable) > 5) {
            return game.getTick() % 20 > 10 ? "#FFFFFF" : "#0000BB";
          } else {
            return "#0000BB";
          }
        } else if (eaten) {
          return "#222";
        }
        return colour;
      };

      function draw(ctx) {

        var s = map.blockSize,
        top = (position.y / 10) * s,
        left = (position.x / 10) * s;

        if (eatable && secondsAgo(eatable) > 8) {
          eatable = null;
        }

        if (eaten && secondsAgo(eaten) > 3) {
          eaten = null;
        }

        var tl = left + s;
        var base = top + s - 3;
        var inc = s / 10;

        var high = game.getTick() % 10 > 5 ? 3 : -3;
        var low = game.getTick() % 10 > 5 ? -3 : 3;

        ctx.fillStyle = getColour();
        ctx.beginPath();

        ctx.moveTo(left, base);

        ctx.quadraticCurveTo(left, top, left + (s / 2), top);
        ctx.quadraticCurveTo(left + s, top, left + s, base);

        // Wavy things at the bottom
        ctx.quadraticCurveTo(tl - (inc * 1), base + high, tl - (inc * 2), base);
        ctx.quadraticCurveTo(tl - (inc * 3), base + low, tl - (inc * 4), base);
        ctx.quadraticCurveTo(tl - (inc * 5), base + high, tl - (inc * 6), base);
        ctx.quadraticCurveTo(tl - (inc * 7), base + low, tl - (inc * 8), base);
        ctx.quadraticCurveTo(tl - (inc * 9), base + high, tl - (inc * 10), base);

        ctx.closePath();
        ctx.fill();

        ctx.beginPath();
        ctx.fillStyle = "#FFF";
        ctx.arc(left + 6, top + 6, s / 6, 0, 300, false);
        ctx.arc((left + s) - 6, top + 6, s / 6, 0, 300, false);
        ctx.closePath();
        ctx.fill();

        var f = s / 12;
        var off = {};
        off[RIGHT] = [f, 0];
        off[LEFT] = [-f, 0];
        off[UP] = [0, -f];
        off[DOWN] = [0, f];

        ctx.beginPath();
        ctx.fillStyle = "#000";
        ctx.arc(left + 6 + off[direction][0], top + 6 + off[direction][1],
          s / 15, 0, 300, false);
          ctx.arc((left + s) - 6 + off[direction][0], top + 6 + off[direction][1],
          s / 15, 0, 300, false);
          ctx.closePath();
          ctx.fill();

        };

        function pane(pos) {

          if (pos.y === 100 && pos.x >= 190 && direction === RIGHT) {
            return { "y": 100, "x": -10 };
          }

          if (pos.y === 100 && pos.x <= -10 && direction === LEFT) {
            return position = { "y": 100, "x": 190 };
          }

          return false;
        };

        function move(ctx) {

          var oldPos = position,
          onGrid = onGridSquare(position),
          npos = null;

          if (due !== direction) {

            npos = getNewCoord(due, position);

            if (onGrid &&
              map.isFloorSpace({
                "y": pointToCoord(nextSquare(npos.y, due)),
                "x": pointToCoord(nextSquare(npos.x, due))
              })) {
                direction = due;
              } else {
                npos = null;
              }
            }

            if (npos === null) {
              npos = getNewCoord(direction, position);
            }

            if (onGrid &&
              map.isWallSpace({
                "y": pointToCoord(nextSquare(npos.y, direction)),
                "x": pointToCoord(nextSquare(npos.x, direction))
              })) {

                due = getRandomDirection();
                return move(ctx);
              }

              position = npos;

              var tmp = pane(position);
              if (tmp) {
                position = tmp;
              }

              due = getRandomDirection();

              return {
                "new": position,
                "old": oldPos
              };
            };

            return {
              "eat": eat,
              "isVunerable": isVunerable,
              "isDangerous": isDangerous,
              "makeEatable": makeEatable,
              "reset": reset,
              "move": move,
              "draw": draw
            };
          };

          Pacman.User = function(game, map) {

            var position = null,
            direction = null,
            eaten = null,
            due = null,
            lives = null,
            score = 5,
            keyMap = {};

            keyMap[KEY.ARROW_LEFT] = LEFT;
            keyMap[KEY.ARROW_UP] = UP;
            keyMap[KEY.ARROW_RIGHT] = RIGHT;
            keyMap[KEY.ARROW_DOWN] = DOWN;

            function addScore(nScore) {

              score += nScore;


              if (score >= 10000 && score - nScore < 10000) {
                lives += 1;
              }
            };

            function theScore() {
              return score;
            };

            //T0DO
            function loseLife() {
              lives -= 1;
            };

            function getLives() {
              return lives;
            };

            function initUser() {
              score = 0;
              lives = 3;
              newLevel();
            }

            function newLevel() {
              resetPosition();
              eaten = 0;
            };

            function resetPosition() {
              position = { "x": 90, "y": 120 };
              direction = LEFT;
              due = LEFT;
            };

            function reset() {
              initUser();
              resetPosition();
            };

            function keyDown(e) {
              if (typeof keyMap[e.keyCode] !== "undefined") {
                due = keyMap[e.keyCode];
                e.preventDefault();
                e.stopPropagation();
                return false;
              }
              return true;
            };

            function getNewCoord(dir, current) {
              return {
                "x": current.x + (dir === LEFT && -2 || dir === RIGHT && 2 || 0),
                "y": current.y + (dir === DOWN && 2 || dir === UP && -2 || 0)
              };
            };

            function onWholeSquare(x) {
              return x % 10 === 0;
            };

            function pointToCoord(x) {
              return Math.round(x / 10);
            };

            function nextSquare(x, dir) {
              var rem = x % 10;
              if (rem === 0) {
                return x;
              } else if (dir === RIGHT || dir === DOWN) {
                return x + (10 - rem);
              } else {
                return x - rem;
              }
            };

            function next(pos, dir) {
              return {
                "y": pointToCoord(nextSquare(pos.y, dir)),
                "x": pointToCoord(nextSquare(pos.x, dir)),
              };
            };

            function onGridSquare(pos) {
              return onWholeSquare(pos.y) && onWholeSquare(pos.x);
            };

            function isOnSamePlane(due, dir) {
              return ((due === LEFT || due === RIGHT) &&
              (dir === LEFT || dir === RIGHT)) ||
              ((due === UP || due === DOWN) &&
              (dir === UP || dir === DOWN));
            };

            function move(ctx) {

              var npos = null,
              nextWhole = null,
              oldPosition = position,
              block = null;

              if (due !== direction) {
                npos = getNewCoord(due, position);

                if (isOnSamePlane(due, direction) ||
                (onGridSquare(position) &&
                map.isFloorSpace(next(npos, due)))) {
                  direction = due;
                } else {
                  npos = null;
                }
              }

              if (npos === null) {
                npos = getNewCoord(direction, position);
              }

              if (onGridSquare(position) && map.isWallSpace(next(npos, direction))) {
                direction = NONE;
              }

              if (direction === NONE) {
                return { "new": position, "old": position };
              }

              if (npos.y === 100 && npos.x >= 190 && direction === RIGHT) {
                npos = { "y": 100, "x": -10 };
              }

              if (npos.y === 100 && npos.x <= -12 && direction === LEFT) {
                npos = { "y": 100, "x": 190 };
              }

              position = npos;
              nextWhole = next(position, direction);

              block = map.block(nextWhole);

              if ((isMidSquare(position.y) || isMidSquare(position.x)) &&
              block === Pacman.BISCUIT || block === Pacman.PILL) {

                map.setBlock(nextWhole, Pacman.EMPTY);
                addScore((block === Pacman.BISCUIT) ? 10 : 50);
                eaten += 1;

                if (eaten === 182) {
                  game.completedLevel();
                }

                if (block === Pacman.PILL) {
                  game.eatenPill();
                }
              }

              return {
                "new": position,
                "old": oldPosition
              };
            };

            function isMidSquare(x) {
              var rem = x % 10;
              return rem > 3 || rem < 7;
            };

            function calcAngle(dir, pos) {
              if (dir == RIGHT && (pos.x % 10 < 5)) {
                return { "start": 0.25, "end": 1.75, "direction": false };
              } else if (dir === DOWN && (pos.y % 10 < 5)) {
                return { "start": 0.75, "end": 2.25, "direction": false };
              } else if (dir === UP && (pos.y % 10 < 5)) {
                return { "start": 1.25, "end": 1.75, "direction": true };
              } else if (dir === LEFT && (pos.x % 10 < 5)) {
                return { "start": 0.75, "end": 1.25, "direction": true };
              }
              return { "start": 0, "end": 2, "direction": false };
            };

            function drawDead(ctx, amount) {

              var size = map.blockSize,
              half = size / 2;

              if (amount >= 1) {
                return;
              }

              ctx.fillStyle = "#FFFF00";
              ctx.beginPath();
              ctx.moveTo(((position.x / 10) * size) + half,
              ((position.y / 10) * size) + half);

              ctx.arc(((position.x / 10) * size) + half,
              ((position.y / 10) * size) + half,
              half, 0, Math.PI * 2 * amount, true);

              ctx.fill();
            };

            function draw(ctx) {

              var s = map.blockSize,
              angle = calcAngle(direction, position);

              ctx.fillStyle = "#FFFF00";

              ctx.beginPath();

              ctx.moveTo(((position.x / 10) * s) + s / 2,
              ((position.y / 10) * s) + s / 2);

              ctx.arc(((position.x / 10) * s) + s / 2,
              ((position.y / 10) * s) + s / 2,
              s / 2, Math.PI * angle.start,
              Math.PI * angle.end, angle.direction);

              ctx.fill();
            };

            initUser();

            return {
              "draw": draw,
              "drawDead": drawDead,
              "loseLife": loseLife,
              "getLives": getLives,
              "score": score,
              "addScore": addScore,
              "theScore": theScore,
              "keyDown": keyDown,
              "move": move,
              "newLevel": newLevel,
              "reset": reset,
              "resetPosition": resetPosition
            };
          };

          Pacman.Map = function(size) {

            var height = null,
            width = null,
            blockSize = size,
            pillSize = 0,
            map = null;

            function withinBounds(y, x) {
              return y >= 0 && y < height && x >= 0 && x < width;
            }

            function isWall(pos) {
              return withinBounds(pos.y, pos.x) && map[pos.y][pos.x] === Pacman.WALL;
            }

            function isFloorSpace(pos) {
              if (!withinBounds(pos.y, pos.x)) {
                return false;
              }
              var peice = map[pos.y][pos.x];
              return peice === Pacman.EMPTY ||
              peice === Pacman.BISCUIT ||
              peice === Pacman.PILL;
            }

            function drawWall(ctx) {

              var i, j, p, line;

              ctx.strokeStyle = "#0000FF";
              ctx.lineWidth = 5;
              ctx.lineCap = "round";

              for (i = 0; i < Pacman.WALLS.length; i += 1) {
                line = Pacman.WALLS[i];
                ctx.beginPath();

                for (j = 0; j < line.length; j += 1) {

                  p = line[j];

                  if (p.move) {
                    ctx.moveTo(p.move[0] * blockSize, p.move[1] * blockSize);
                  } else if (p.line) {
                    ctx.lineTo(p.line[0] * blockSize, p.line[1] * blockSize);
                  } else if (p.curve) {
                    ctx.quadraticCurveTo(p.curve[0] * blockSize,
                      p.curve[1] * blockSize,
                      p.curve[2] * blockSize,
                      p.curve[3] * blockSize);
                    }
                  }
                  ctx.stroke();
                }
              }

              function reset() {
                map = Pacman.MAP.clone();
                height = map.length;
                width = map[0].length;
              };

              function block(pos) {
                return map[pos.y][pos.x];
              };

              function setBlock(pos, type) {
                map[pos.y][pos.x] = type;
              };

              function drawPills(ctx) {

                if (++pillSize > 30) {
                  pillSize = 0;
                }

                for (i = 0; i < height; i += 1) {
                  for (j = 0; j < width; j += 1) {
                    if (map[i][j] === Pacman.PILL) {
                      ctx.beginPath();

                      ctx.fillStyle = "#000";
                      ctx.fillRect((j * blockSize), (i * blockSize),
                      blockSize, blockSize);

                      ctx.fillStyle = "#FFF";
                      ctx.arc((j * blockSize) + blockSize / 2,
                      (i * blockSize) + blockSize / 2,
                      Math.abs(5 - (pillSize / 3)),
                      0,
                      Math.PI * 2, false);
                      ctx.fill();
                      ctx.closePath();
                    }
                  }
                }
              };

              function draw(ctx) {

                var i, j, size = blockSize;

                ctx.fillStyle = "#000";
                ctx.fillRect(0, 0, width * size, height * size);

                drawWall(ctx);

                for (i = 0; i < height; i += 1) {
                  for (j = 0; j < width; j += 1) {
                    drawBlock(i, j, ctx);
                  }
                }
              };

              function drawBlock(y, x, ctx) {

                var layout = map[y][x];

                if (layout === Pacman.PILL) {
                  return;
                }

                ctx.beginPath();

                if (layout === Pacman.EMPTY || layout === Pacman.BLOCK ||
                  layout === Pacman.BISCUIT) {

                    ctx.fillStyle = "#000";
                    ctx.fillRect((x * blockSize), (y * blockSize),
                    blockSize, blockSize);

                    if (layout === Pacman.BISCUIT) {
                      ctx.fillStyle = "#FFF";
                      ctx.fillRect((x * blockSize) + (blockSize / 2.5),
                      (y * blockSize) + (blockSize / 2.5),
                      blockSize / 6, blockSize / 6);
                    }
                  }
                  ctx.closePath();
                };

                reset();

                return {
                  "draw": draw,
                  "drawBlock": drawBlock,
                  "drawPills": drawPills,
                  "block": block,
                  "setBlock": setBlock,
                  "reset": reset,
                  "isWallSpace": isWall,
                  "isFloorSpace": isFloorSpace,
                  "height": height,
                  "width": width,
                  "blockSize": blockSize
                };
              };

              Pacman.Audio = function(game) {

                var files = [],
                endEvents = [],
                progressEvents = [],
                playing = [];

                function load(name, path, cb) {

                  var f = files[name] = document.createElement("audio");

                  progressEvents[name] = function(event) { progress(event, name, cb); };

                  f.addEventListener("canplaythrough", progressEvents[name], true);
                  f.setAttribute("preload", "true");
                  f.setAttribute("autobuffer", "true");
                  f.setAttribute("src", path);
                  f.pause();
                };

                function progress(event, name, callback) {
                  if (event.loaded === event.total && typeof callback === "function") {
                    callback();
                    files[name].removeEventListener("canplaythrough",
                    progressEvents[name], true);
                  }
                };

                function disableSound() {
                  for (var i = 0; i < playing.length; i++) {
                    files[playing[i]].pause();
                    files[playing[i]].currentTime = 0;
                  }
                  playing = [];
                };

                function ended(name) {

                  var i, tmp = [],
                  found = false;

                  files[name].removeEventListener("ended", endEvents[name], true);

                  for (i = 0; i < playing.length; i++) {
                    if (!found && playing[i]) {
                      found = true;
                    } else {
                      tmp.push(playing[i]);
                    }
                  }
                  playing = tmp;
                };

                function play(name) {
                  if (!game.soundDisabled()) {
                    endEvents[name] = function() { ended(name); };
                    playing.push(name);
                    files[name].addEventListener("ended", endEvents[name], true);
                    files[name].play();
                  }
                };

                function pause() {
                  for (var i = 0; i < playing.length; i++) {
                    files[playing[i]].pause();
                  }
                };

                function resume() {
                  for (var i = 0; i < playing.length; i++) {
                    files[playing[i]].play();
                  }
                };

                return {
                  "disableSound": disableSound,
                  "load": load,
                  "play": play,
                  "pause": pause,
                  "resume": resume
                };
              };

              var PACMAN = (function() {

                var state = WAITING,
                audio = null,
                ghosts = [],
                ghostSpecs = ["#00FFDE", "#FF0000", "#FFB8DE", "#FFB847"],
                eatenCount = 0,
                level = 0,
                tick = 0,
                ghostPos, userPos,
                stateChanged = true,
                timerStart = null,
                lastTime = 0,
                ctx = null,
                timer = null,
                map = null,
                user = null,
                stored = null;

                function getTick() {
                  return tick;
                };

                function drawScore(text, position) {
                  ctx.fillStyle = "#FFFFFF";
                  ctx.font = "12px BDCartoonShoutRegular";
                  ctx.fillText(text,
                    (position["new"]["x"] / 10) * map.blockSize,
                    ((position["new"]["y"] + 5) / 10) * map.blockSize);
                  }

                  function dialog(text) {
                    ctx.fillStyle = "#FFFF00";
                    ctx.font = "14px BDCartoonShoutRegular";
                    var width = ctx.measureText(text).width,
                    x = ((map.width * map.blockSize) - width) / 2;
                    ctx.fillText(text, x, (map.height * 10) + 8);
                  }

                  function soundDisabled() {
                    return localStorage["soundDisabled"] === "true";
                  };

                  function startLevel() {
                    user.resetPosition();
                    for (var i = 0; i < ghosts.length; i += 1) {
                      ghosts[i].reset();
                    }
                    audio.play("start");
                    timerStart = tick;
                    setState(COUNTDOWN);
                  }

                  function startNewGame() {
                    setState(WAITING);
                    level = 1;
                    user.reset();
                    map.reset();
                    map.draw(ctx);
                    startLevel();
                  }

                  function keyDown(e) {
                    if (e.keyCode === KEY.N) {
                      startNewGame();
                    } else if (e.keyCode === KEY.S) {
                      audio.disableSound();
                      localStorage["soundDisabled"] = !soundDisabled();
                    } else if (e.keyCode === KEY.P && state === PAUSE) {
                      audio.resume();
                      map.draw(ctx);
                      setState(stored);
                    } else if (e.keyCode === KEY.P) {
                      stored = state;
                      setState(PAUSE);
                      audio.pause();
                      map.draw(ctx);
                      dialog("Paused");
                    } else if (state !== PAUSE) {
                      return user.keyDown(e);
                    }
                    return true;
                  }

                  //TODO

                  function loseLife() {
                    setState(WAITING);
                    user.loseLife();
                    if (user.getLives() > 0) {
                      startLevel();
                    } else {
                      (db);

                      var currentScore = user.theScore()

                      var ref = db.ref("users");
                      ref.orderByChild("id").equalTo(userId).on("child_added", function(snapshot) {
                        const highScore = snapshot.val().highscore;
                        const userHouse = snapshot.val().house;
                        const key = snapshot.key;


                        if (currentScore > highScore) {
                          document.getElementById('highScore').innerHTML = "Highscore: " + String(currentScore);


                          ("current score higher");

                          db.ref('users/' + String(key)).update({
                            highscore: currentScore,

                          });

                          const diff = currentScore - highScore;

                          var houseRef = db.ref("houses");

                          houseRef.orderByKey().equalTo(userHouse).on("child_added", function(houseSnapshot) {
                            const currentHouseScore = houseSnapshot.val().score;
                            const newScore = currentHouseScore + diff;
                            db.ref('houses/' + userHouse).update({
                              score: newScore,

                            });


                          })


                        } else {
                          ("current score lower")
                        }

                      });
                      (user.theScore());
                    }
                  }

                  function setState(nState) {
                    state = nState;
                    stateChanged = true;
                  };

                  function collided(user, ghost) {
                    return (Math.sqrt(Math.pow(ghost.x - user.x, 2) +
                    Math.pow(ghost.y - user.y, 2))) < 10;
                  };

                  function drawFooter() {

                    var topLeft = (map.height * map.blockSize),
                    textBase = topLeft + 17;

                    ctx.fillStyle = "#000000";
                    ctx.fillRect(0, topLeft, (map.width * map.blockSize), 30);

                    ctx.fillStyle = "#FFFF00";

                    for (var i = 0, len = user.getLives(); i < len; i++) {
                      ctx.fillStyle = "#FFFF00";
                      ctx.beginPath();
                      ctx.moveTo(150 + (25 * i) + map.blockSize / 2,
                      (topLeft + 1) + map.blockSize / 2);

                      ctx.arc(150 + (25 * i) + map.blockSize / 2,
                      (topLeft + 1) + map.blockSize / 2,
                      map.blockSize / 2, Math.PI * 0.25, Math.PI * 1.75, false);
                      ctx.fill();
                    }

                    ctx.fillStyle = !soundDisabled() ? "#00FF00" : "#FF0000";
                    ctx.font = "bold 16px sans-serif";
                    //ctx.fillText("â™ª", 10, textBase);
                    ctx.fillText("s", 10, textBase);

                    ctx.fillStyle = "#FFFF00";
                    ctx.font = "14px BDCartoonShoutRegular";
                    ctx.fillText("Score: " + user.theScore(), 30, textBase);
                    ctx.fillText("Level: " + level, 260, textBase);
                  }

                  function redrawBlock(pos) {
                    map.drawBlock(Math.floor(pos.y / 10), Math.floor(pos.x / 10), ctx);
                    map.drawBlock(Math.ceil(pos.y / 10), Math.ceil(pos.x / 10), ctx);
                  }

                  function mainDraw() {

                    var diff, u, i, len, nScore;

                    ghostPos = [];

                    for (i = 0, len = ghosts.length; i < len; i += 1) {
                      ghostPos.push(ghosts[i].move(ctx));
                    }
                    u = user.move(ctx);

                    for (i = 0, len = ghosts.length; i < len; i += 1) {
                      redrawBlock(ghostPos[i].old);
                    }
                    redrawBlock(u.old);

                    for (i = 0, len = ghosts.length; i < len; i += 1) {
                      ghosts[i].draw(ctx);
                    }
                    user.draw(ctx);

                    userPos = u["new"];

                    for (i = 0, len = ghosts.length; i < len; i += 1) {
                      if (collided(userPos, ghostPos[i]["new"])) {
                        if (ghosts[i].isVunerable()) {
                          audio.play("eatghost");
                          ghosts[i].eat();
                          eatenCount += 1;
                          nScore = eatenCount * 50;
                          drawScore(nScore, ghostPos[i]);
                          user.addScore(nScore);
                          setState(EATEN_PAUSE);
                          timerStart = tick;
                        } else if (ghosts[i].isDangerous()) {
                          audio.play("die");
                          setState(DYING);
                          timerStart = tick;
                        }
                      }
                    }
                  };

                  function mainLoop() {

                    var diff;

                    if (state !== PAUSE) {
                      ++tick;
                    }

                    map.drawPills(ctx);

                    if (state === PLAYING) {
                      mainDraw();
                    } else if (state === WAITING && stateChanged) {
                      stateChanged = false;
                      map.draw(ctx);
                      dialog("Press N to start a New game");
                    } else if (state === EATEN_PAUSE &&
                      (tick - timerStart) > (Pacman.FPS / 3)) {
                        map.draw(ctx);
                        setState(PLAYING);

                        //TODO
                      } else if (state === DYING) {
                        if (tick - timerStart > (Pacman.FPS * 2)) {
                          loseLife();
                        } else {
                          redrawBlock(userPos);
                          for (i = 0, len = ghosts.length; i < len; i += 1) {
                            redrawBlock(ghostPos[i].old);
                            ghostPos.push(ghosts[i].draw(ctx));
                          }
                          user.drawDead(ctx, (tick - timerStart) / (Pacman.FPS * 2));
                        }
                      } else if (state === COUNTDOWN) {

                        diff = 5 + Math.floor((timerStart - tick) / Pacman.FPS);

                        if (diff === 0) {
                          map.draw(ctx);
                          setState(PLAYING);
                        } else {
                          if (diff !== lastTime) {
                            lastTime = diff;
                            map.draw(ctx);
                            dialog("Starting in: " + diff);
                          }
                        }
                      }

                      drawFooter();
                    }

                    function eatenPill() {
                      audio.play("eatpill");
                      timerStart = tick;
                      eatenCount = 0;
                      for (i = 0; i < ghosts.length; i += 1) {
                        ghosts[i].makeEatable(ctx);
                      }
                    };

                    function completedLevel() {
                      setState(WAITING);
                      level += 1;
                      map.reset();
                      user.newLevel();
                      startLevel();
                    };

                    function keyPress(e) {
                      if (state !== WAITING && state !== PAUSE) {
                        e.preventDefault();
                        e.stopPropagation();
                      }
                    };

                    function init(wrapper, root) {

                      var i, len, ghost,
                      blockSize = wrapper.offsetWidth / 19,
                      canvas = document.createElement("canvas");

                      canvas.setAttribute("width", (blockSize * 19) + "px");
                      canvas.setAttribute("height", (blockSize * 22) + 30 + "px");

                      wrapper.appendChild(canvas);

                      ctx = canvas.getContext('2d');

                      audio = new Pacman.Audio({ "soundDisabled": soundDisabled });
                      map = new Pacman.Map(blockSize);
                      user = new Pacman.User({
                        "completedLevel": completedLevel,
                        "eatenPill": eatenPill
                      }, map);

                      for (i = 0, len = ghostSpecs.length; i < len; i += 1) {
                        ghost = new Pacman.Ghost({ "getTick": getTick }, map, ghostSpecs[i]);
                        ghosts.push(ghost);
                      }

                      map.draw(ctx);
                      dialog("Loading ...");

                      var extension = Modernizr.audio.ogg ? 'ogg' : 'mp3';

                      var audio_files = [
                        ["start", root + "audio/opening_song." + extension],
                        ["die", root + "audio/die." + extension],
                        ["eatghost", root + "audio/eatghost." + extension],
                        ["eatpill", root + "audio/eatpill." + extension],
                        ["eating", root + "audio/eating.short." + extension],
                        ["eating2", root + "audio/eating.short." + extension]
                      ];

                      load(audio_files, function() { loaded(); });
                    };

                    function load(arr, callback) {

                      if (arr.length === 0) {
                        callback();
                      } else {
                        var x = arr.pop();
                        audio.load(x[0], x[1], function() { load(arr, callback); });
                      }
                    };

                    function loaded() {

                      dialog("Press N to Start");

                      document.addEventListener("keydown", keyDown, true);
                      document.addEventListener("keypress", keyPress, true);

                      timer = window.setInterval(mainLoop, 1000 / Pacman.FPS);
                    };

                    return {
                      "init": init
                    };

                  }());

                  /* Human readable keyCode index */
                  var KEY = { 'BACKSPACE': 8, 'TAB': 9, 'NUM_PAD_CLEAR': 12, 'ENTER': 13, 'SHIFT': 16, 'CTRL': 17, 'ALT': 18, 'PAUSE': 19, 'CAPS_LOCK': 20, 'ESCAPE': 27, 'SPACEBAR': 32, 'PAGE_UP': 33, 'PAGE_DOWN': 34, 'END': 35, 'HOME': 36, 'ARROW_LEFT': 37, 'ARROW_UP': 38, 'ARROW_RIGHT': 39, 'ARROW_DOWN': 40, 'PRINT_SCREEN': 44, 'INSERT': 45, 'DELETE': 46, 'SEMICOLON': 59, 'WINDOWS_LEFT': 91, 'WINDOWS_RIGHT': 92, 'SELECT': 93, 'NUM_PAD_ASTERISK': 106, 'NUM_PAD_PLUS_SIGN': 107, 'NUM_PAD_HYPHEN-MINUS': 109, 'NUM_PAD_FULL_STOP': 110, 'NUM_PAD_SOLIDUS': 111, 'NUM_LOCK': 144, 'SCROLL_LOCK': 145, 'SEMICOLON': 186, 'EQUALS_SIGN': 187, 'COMMA': 188, 'HYPHEN-MINUS': 189, 'FULL_STOP': 190, 'SOLIDUS': 191, 'GRAVE_ACCENT': 192, 'LEFT_SQUARE_BRACKET': 219, 'REVERSE_SOLIDUS': 220, 'RIGHT_SQUARE_BRACKET': 221, 'APOSTROPHE': 222 };

                  (function() {
                    /* 0 - 9 */
                    for (var i = 48; i <= 57; i++) {
                      KEY['' + (i - 48)] = i;
                    }
                    /* A - Z */
                    for (i = 65; i <= 90; i++) {
                      KEY['' + String.fromCharCode(i)] = i;
                    }
                    /* NUM_PAD_0 - NUM_PAD_9 */
                    for (i = 96; i <= 105; i++) {
                      KEY['NUM_PAD_' + (i - 96)] = i;
                    }
                    /* F1 - F12 */
                    for (i = 112; i <= 123; i++) {
                      KEY['F' + (i - 112 + 1)] = i;
                    }
                  })();

                  Pacman.WALL = 0;
                  Pacman.BISCUIT = 1;
                  Pacman.EMPTY = 2;
                  Pacman.BLOCK = 3;
                  Pacman.PILL = 4;

                  Pacman.MAP = [
                    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
                    [0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0],
                    [0, 4, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 4, 0],
                    [0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0],
                    [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
                    [0, 1, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 1, 0],
                    [0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 0],
                    [0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0],
                    [2, 2, 2, 0, 1, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 0, 2, 2, 2],
                    [0, 0, 0, 0, 1, 0, 1, 0, 0, 3, 0, 0, 1, 0, 1, 0, 0, 0, 0],
                    [2, 2, 2, 2, 1, 1, 1, 0, 3, 3, 3, 0, 1, 1, 1, 2, 2, 2, 2],
                    [0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0],
                    [2, 2, 2, 0, 1, 0, 1, 1, 1, 2, 1, 1, 1, 0, 1, 0, 2, 2, 2],
                    [0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0],
                    [0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0],
                    [0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 0, 0, 1, 0],
                    [0, 4, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 4, 0],
                    [0, 0, 1, 0, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 0, 0],
                    [0, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 1, 0],
                    [0, 1, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 0],
                    [0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0],
                    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
                  ];

                  Pacman.WALLS = [

                    [{ "move": [0, 9.5] }, { "line": [3, 9.5] },
                    { "curve": [3.5, 9.5, 3.5, 9] }, { "line": [3.5, 8] },
                    { "curve": [3.5, 7.5, 3, 7.5] }, { "line": [1, 7.5] },
                    { "curve": [0.5, 7.5, 0.5, 7] }, { "line": [0.5, 1] },
                    { "curve": [0.5, 0.5, 1, 0.5] }, { "line": [9, 0.5] },
                    { "curve": [9.5, 0.5, 9.5, 1] }, { "line": [9.5, 3.5] }
                  ],

                  [{ "move": [9.5, 1] },
                  { "curve": [9.5, 0.5, 10, 0.5] }, { "line": [18, 0.5] },
                  { "curve": [18.5, 0.5, 18.5, 1] }, { "line": [18.5, 7] },
                  { "curve": [18.5, 7.5, 18, 7.5] }, { "line": [16, 7.5] },
                  { "curve": [15.5, 7.5, 15.5, 8] }, { "line": [15.5, 9] },
                  { "curve": [15.5, 9.5, 16, 9.5] }, { "line": [19, 9.5] }
                ],

                [{ "move": [2.5, 5.5] }, { "line": [3.5, 5.5] }],

                [{ "move": [3, 2.5] },
                { "curve": [3.5, 2.5, 3.5, 3] },
                { "curve": [3.5, 3.5, 3, 3.5] },
                { "curve": [2.5, 3.5, 2.5, 3] },
                { "curve": [2.5, 2.5, 3, 2.5] }
              ],

              [{ "move": [15.5, 5.5] }, { "line": [16.5, 5.5] }],

              [{ "move": [16, 2.5] }, { "curve": [16.5, 2.5, 16.5, 3] },
              { "curve": [16.5, 3.5, 16, 3.5] }, { "curve": [15.5, 3.5, 15.5, 3] },
              { "curve": [15.5, 2.5, 16, 2.5] }
            ],

            [{ "move": [6, 2.5] }, { "line": [7, 2.5] }, { "curve": [7.5, 2.5, 7.5, 3] },
            { "curve": [7.5, 3.5, 7, 3.5] }, { "line": [6, 3.5] },
            { "curve": [5.5, 3.5, 5.5, 3] }, { "curve": [5.5, 2.5, 6, 2.5] }
          ],

          [{ "move": [12, 2.5] }, { "line": [13, 2.5] }, { "curve": [13.5, 2.5, 13.5, 3] },
          { "curve": [13.5, 3.5, 13, 3.5] }, { "line": [12, 3.5] },
          { "curve": [11.5, 3.5, 11.5, 3] }, { "curve": [11.5, 2.5, 12, 2.5] }
        ],

        [{ "move": [7.5, 5.5] }, { "line": [9, 5.5] }, { "curve": [9.5, 5.5, 9.5, 6] },
        { "line": [9.5, 7.5] }
      ],
      [{ "move": [9.5, 6] }, { "curve": [9.5, 5.5, 10.5, 5.5] },
      { "line": [11.5, 5.5] }
    ],


    [{ "move": [5.5, 5.5] }, { "line": [5.5, 7] }, { "curve": [5.5, 7.5, 6, 7.5] },
    { "line": [7.5, 7.5] }
  ],
  [{ "move": [6, 7.5] }, { "curve": [5.5, 7.5, 5.5, 8] }, { "line": [5.5, 9.5] }],

  [{ "move": [13.5, 5.5] }, { "line": [13.5, 7] },
  { "curve": [13.5, 7.5, 13, 7.5] }, { "line": [11.5, 7.5] }
],
[{ "move": [13, 7.5] }, { "curve": [13.5, 7.5, 13.5, 8] },
{ "line": [13.5, 9.5] }
],

[{ "move": [0, 11.5] }, { "line": [3, 11.5] }, { "curve": [3.5, 11.5, 3.5, 12] },
{ "line": [3.5, 13] }, { "curve": [3.5, 13.5, 3, 13.5] }, { "line": [1, 13.5] },
{ "curve": [0.5, 13.5, 0.5, 14] }, { "line": [0.5, 17] },
{ "curve": [0.5, 17.5, 1, 17.5] }, { "line": [1.5, 17.5] }
],
[{ "move": [1, 17.5] }, { "curve": [0.5, 17.5, 0.5, 18] }, { "line": [0.5, 21] },
{ "curve": [0.5, 21.5, 1, 21.5] }, { "line": [18, 21.5] },
{ "curve": [18.5, 21.5, 18.5, 21] }, { "line": [18.5, 18] },
{ "curve": [18.5, 17.5, 18, 17.5] }, { "line": [17.5, 17.5] }
],
[{ "move": [18, 17.5] }, { "curve": [18.5, 17.5, 18.5, 17] },
{ "line": [18.5, 14] }, { "curve": [18.5, 13.5, 18, 13.5] },
{ "line": [16, 13.5] }, { "curve": [15.5, 13.5, 15.5, 13] },
{ "line": [15.5, 12] }, { "curve": [15.5, 11.5, 16, 11.5] },
{ "line": [19, 11.5] }
],

[{ "move": [5.5, 11.5] }, { "line": [5.5, 13.5] }],
[{ "move": [13.5, 11.5] }, { "line": [13.5, 13.5] }],

[{ "move": [2.5, 15.5] }, { "line": [3, 15.5] },
{ "curve": [3.5, 15.5, 3.5, 16] }, { "line": [3.5, 17.5] }
],
[{ "move": [16.5, 15.5] }, { "line": [16, 15.5] },
{ "curve": [15.5, 15.5, 15.5, 16] }, { "line": [15.5, 17.5] }
],

[{ "move": [5.5, 15.5] }, { "line": [7.5, 15.5] }],
[{ "move": [11.5, 15.5] }, { "line": [13.5, 15.5] }],

[{ "move": [2.5, 19.5] }, { "line": [5, 19.5] },
{ "curve": [5.5, 19.5, 5.5, 19] }, { "line": [5.5, 17.5] }
],
[{ "move": [5.5, 19] }, { "curve": [5.5, 19.5, 6, 19.5] },
{ "line": [7.5, 19.5] }
],

[{ "move": [11.5, 19.5] }, { "line": [13, 19.5] },
{ "curve": [13.5, 19.5, 13.5, 19] }, { "line": [13.5, 17.5] }
],
[{ "move": [13.5, 19] }, { "curve": [13.5, 19.5, 14, 19.5] },
{ "line": [16.5, 19.5] }
],

[{ "move": [7.5, 13.5] }, { "line": [9, 13.5] },
{ "curve": [9.5, 13.5, 9.5, 14] }, { "line": [9.5, 15.5] }
],
[{ "move": [9.5, 14] }, { "curve": [9.5, 13.5, 10, 13.5] },
{ "line": [11.5, 13.5] }
],

[{ "move": [7.5, 17.5] }, { "line": [9, 17.5] },
{ "curve": [9.5, 17.5, 9.5, 18] }, { "line": [9.5, 19.5] }
],
[{ "move": [9.5, 18] }, { "curve": [9.5, 17.5, 10, 17.5] },
{ "line": [11.5, 17.5] }
],

[{ "move": [8.5, 9.5] }, { "line": [8, 9.5] }, { "curve": [7.5, 9.5, 7.5, 10] },
{ "line": [7.5, 11] }, { "curve": [7.5, 11.5, 8, 11.5] },
{ "line": [11, 11.5] }, { "curve": [11.5, 11.5, 11.5, 11] },
{ "line": [11.5, 10] }, { "curve": [11.5, 9.5, 11, 9.5] },
{ "line": [10.5, 9.5] }
]
];

Object.prototype.clone = function() {
  var i, newObj = (this instanceof Array) ? [] : {};
  for (i in this) {
    if (i === 'clone') {
      continue;
    }
    if (this[i] && typeof this[i] === "object") {
      newObj[i] = this[i].clone();
    } else {
      newObj[i] = this[i];
    }
  }
  return newObj;
};






</script>


</body>
</html>
